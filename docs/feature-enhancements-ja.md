# GoTODO 機能拡張案

## 現在の問題点

### 機能面の課題
- **永続化なし**: メモリ内ストレージのため、再起動でデータが消失
- **基本CRUD機能のみ**: 作成・表示・完了・削除のみ
- **分類機能なし**: カテゴリやプロジェクト別の管理ができない
- **優先度設定なし**: 重要度の判断ができない
- **期限管理なし**: スケジュール管理ができない
- **検索・フィルタなし**: 大量のTODOを管理できない
- **編集機能なし**: タイトルの修正ができない

### UI/UX面の課題
- **単一画面のみ**: 詳細表示や設定画面がない
- **視覚的整理不足**: 重要度や期限による視覚的区別がない
- **操作性**: ドラッグ&ドロップでの並び替えができない
- **モバイル対応**: レスポンシブだが、モバイル特化機能なし
- **通知機能なし**: 期限切れの警告などがない

## 機能拡張提案

### Phase 1: 基本機能強化（高優先度）

#### 1.1 データ永続化
- **SQLite データベース導入**
  - ローカルファイルベースの軽量DB
  - サーバー再起動でもデータ保持
  - マイグレーション機能

#### 1.2 TODO編集機能
- **インライン編集**
  - タイトルをクリックして直接編集
  - Enterで保存、Escapeでキャンセル
- **詳細情報追加**
  - 説明文（Description）フィールド
  - 更新日時の追跡

#### 1.3 カテゴリ機能
- **カテゴリ管理**
  - 仕事、プライベート、勉強などの分類
  - カテゴリごとの色分け表示
  - カテゴリ別フィルタリング

#### 1.4 優先度機能
- **3段階優先度**
  - 高（赤）、中（黄）、低（灰）
  - 視覚的なアイコン表示
  - 優先度順ソート

#### 1.5 Docker化・コンテナ環境
- **開発環境の統一**
  - Docker Compose による環境構築
  - Go版本やOS差異の解消
  - 依存関係管理の簡素化
- **デプロイメント準備**
  - 本番環境への展開基盤
  - ポータブルな実行環境
  - 将来のスケーリング対応

### Phase 2: 高度な管理機能（中優先度）

#### 2.1 期限管理
- **期限設定**
  - 日付・時刻指定
  - 期限切れの視覚的警告
  - 期限順ソート

#### 2.2 検索・フィルタ機能
- **全文検索**
  - タイトル・説明文での検索
  - リアルタイム検索結果表示
- **高度なフィルタ**
  - 完了状態、カテゴリ、優先度、期限での絞り込み
  - 複数条件の組み合わせ

#### 2.3 並び替え・整理機能
- **ドラッグ&ドロップ**
  - 手動での順序変更
  - カテゴリ間の移動
- **自動ソート**
  - 作成日、期限、優先度での自動ソート
  - ユーザー設定での既定ソート

#### 2.4 統計・分析機能
- **完了率ダッシュボード**
  - 日別・週別・月別の完了状況
  - カテゴリ別の進捗状況
- **生産性メトリクス**
  - 平均完了時間
  - 期限遵守率

### Phase 3: 高度なUX機能（低優先度）

#### 3.1 テーマ・カスタマイズ
- **ダークモード**
  - システム設定連動
  - 手動切り替え
- **カスタムテーマ**
  - 色の選択
  - フォントサイズ調整

#### 3.2 キーボードショートカット
- **効率的操作**
  - `Ctrl+N`: 新規TODO作成
  - `Ctrl+E`: 編集モード
  - `Space`: 完了切り替え
  - `Delete`: 削除

#### 3.3 バックアップ・エクスポート
- **データエクスポート**
  - JSON、CSV形式での出力
  - 印刷用レイアウト
- **インポート機能**
  - 他のTODOアプリからの移行
  - バックアップファイルの復元

#### 3.4 通知機能
- **ブラウザ通知**
  - 期限切れ警告
  - 完了目標達成通知
- **リマインダー**
  - 設定時刻での通知
  - 繰り返し通知

## 画面設計案

### 1. メイン画面（改良版）
```
┌─────────────────────────────────────────┐
│ 🎯 GoTODO                    [⚙️][🌙]│
├─────────────────────────────────────────┤
│ [➕ 新しいTODO...] [🔍 検索...] [📋]    │
├─────────────────────────────────────────┤
│ フィルタ: [全て][未完了][完了] カテゴリ: [全て▼] │
│ ソート: [作成日▼] 表示: [リスト][カード]      │
├─────────────────────────────────────────┤
│ 📊 統計: 12項目 (8完了, 4未完了) 67%完了    │
├─────────────────────────────────────────┤
│ 🟥 [高] 📋 仕事: プレゼン資料作成 📅 今日    │
│ 🟨 [中] 🏠 家事: 掃除機をかける 📅 明日     │
│ ⬜ [低] 📚 学習: Go言語の勉強             │
└─────────────────────────────────────────┘
```

### 2. TODO詳細モーダル（新規）
```
┌─────────────────────────────┐
│ TODO詳細               [✕] │
├─────────────────────────────┤
│ タイトル: [プレゼン資料作成]    │
│ カテゴリ: [仕事 ▼]           │
│ 優先度:   [● 高 ○ 中 ○ 低]   │
│ 期限:     [2024-01-15 17:00] │
│ 説明:                       │
│ ┌─────────────────────────┐   │
│ │会議用のプレゼン資料を     │   │
│ │PowerPointで作成する      │   │
│ └─────────────────────────┘   │
│                            │
│      [保存] [キャンセル]      │
└─────────────────────────────┘
```

### 3. 設定画面（新規）
```
┌─────────────────────────────────────────┐
│ ⚙️ 設定                              │
├─────────────────────────────────────────┤
│ 外観                                  │
│ □ ダークモード                         │
│ □ システム設定に従う                    │
│                                      │
│ 通知                                  │
│ □ ブラウザ通知を有効にする              │
│ □ 期限1時間前に通知                    │
│                                      │
│ データ                                │
│ [データをエクスポート] [バックアップ復元] │
│                                      │
│ カテゴリ管理                           │
│ • 仕事 🔴 [編集] [削除]                │
│ • 家事 🟢 [編集] [削除]                │
│ [+ 新しいカテゴリ]                     │
└─────────────────────────────────────────┘
```

### 4. 統計ダッシュボード（新規）
```
┌─────────────────────────────────────────┐
│ 📊 統計・分析                          │
├─────────────────────────────────────────┤
│ 今週の進捗                              │
│ ████████████████████░░ 85% (17/20)      │
│                                      │
│ カテゴリ別完了率                        │
│ 仕事:    ██████████░░ 80% (8/10)       │
│ 家事:    ████████████ 100% (5/5)       │
│ 学習:    ████░░░░░░░░ 40% (2/5)         │
│                                      │
│ 期限遵守率: 92%                        │
│ 平均完了時間: 2.3日                     │
└─────────────────────────────────────────┘
```

## 実装優先順位

### 即座に実装すべき機能（Phase 1）
1. **SQLite永続化** - データ保持の基本
2. **TODO編集機能** - 基本的な使いやすさ
3. **カテゴリ機能** - 整理のための最低限機能
4. **優先度機能** - 重要度の判断
5. **Docker化** - 開発環境統一と将来のデプロイ準備

### 中期実装目標（Phase 2）
1. **期限管理** - スケジュール機能
2. **検索・フィルタ** - 大量データ対応
3. **並び替え機能** - ユーザビリティ向上
4. **統計機能** - モチベーション向上

### 長期実装目標（Phase 3）
1. **テーマ・カスタマイズ** - 個人化
2. **キーボードショートカット** - 効率化
3. **バックアップ・エクスポート** - データ管理
4. **通知機能** - 積極的なリマインド

## 技術的考慮事項

### データベース設計
```sql
-- カテゴリテーブル
CREATE TABLE categories (
    id INTEGER PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    color VARCHAR(7) DEFAULT '#007bff',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 拡張TODOテーブル
CREATE TABLE todos (
    id INTEGER PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    category_id INTEGER,
    priority INTEGER DEFAULT 1, -- 1:低, 2:中, 3:高
    due_date DATETIME,
    completed BOOLEAN DEFAULT FALSE,
    position INTEGER DEFAULT 0, -- 手動ソート用
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES categories(id)
);
```

### API拡張案
```
GET    /api/categories          # カテゴリ一覧
POST   /api/categories          # カテゴリ作成
PUT    /api/categories/:id      # カテゴリ更新
DELETE /api/categories/:id      # カテゴリ削除

GET    /api/todos?category=1&priority=3&search=keyword
PUT    /api/todos/:id           # TODO完全更新
PATCH  /api/todos/:id/position  # 位置変更
GET    /api/stats               # 統計情報
GET    /api/export              # データエクスポート
```

### Docker構成案
```yaml
# docker-compose.yml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - ./data:/app/data  # SQLiteファイル永続化
    environment:
      - DB_PATH=/app/data/todos.db
      - PORT=8080
    restart: unless-stopped

# Dockerfile
FROM golang:1.21-alpine AS builder
WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download
COPY . .
RUN go build -o main .

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/
COPY --from=builder /app/main .
COPY --from=builder /app/static ./static
COPY --from=builder /app/templates ./templates
CMD ["./main"]
```

### Docker化のメリット
- **環境統一**: 開発・本番環境の一致
- **簡単セットアップ**: `docker-compose up`で即座に起動
- **依存関係管理**: Goのバージョンやライブラリを統一
- **将来の拡張性**: Redis、PostgreSQL等の追加が容易
- **ポータビリティ**: どのプラットフォームでも同じように動作

この機能拡張により、基本的なTODOアプリから実用的なタスク管理システムへと進化できます。